erDiagram
    %% ROLE-BASED ACCESS CONTROL
    User }o--o{ Role : assigned
    Role }o--o{ Permission : has
    User ||--o{ ActivityLog : generates
    
    %% USER MANAGEMENT
    User ||--o{ Order : places
    User ||--o{ Cart : has
    User ||--o{ Review : writes
    User ||--o{ Address : has
    User ||--o{ PaymentMethod : has
    User ||--o{ Wishlist : has
    User ||--|| Wallet : has
    User ||--o{ UserActivity : generates
    User ||--o{ Notification : receives
    User ||--o{ Message : "sends/receives"
    User ||--o{ LoyaltyPoint : earns
    User ||--o{ UserSession : has
    User ||--o{ Vendor : "can be"
    User ||--o{ Ticket : creates
    User ||--o{ Subscription : subscribes
    User ||--o{ AffiliateLink : creates
    User ||--o{ Report : generates
    User ||--o{ SystemSetting : configures
    User ||--o{ EmailTemplate : manages
    User ||--o{ Announcement : creates
    User ||--o{ Page : manages
    User ||--o{ BlogPost : authors
    User ||--o{ Campaign : creates
    User ||--o{ Banner : manages
    
    %% VENDOR/MARKETPLACE
    Vendor ||--o{ Product : sells
    Vendor ||--o{ VendorPayout : receives
    Vendor ||--|| VendorProfile : has
    Vendor ||--o{ VendorDocument : uploads
    Vendor ||--o{ Commission : pays
    Vendor ||--o{ VendorSettlement : has
    Vendor ||--o{ VendorReview : receives
    
    %% PRODUCT CATALOG
    Category ||--o{ Product : contains
    Category ||--o{ Category : "subcategory"
    Product ||--o{ ProductImage : has
    Product ||--o{ Review : receives
    Product ||--o{ CartItem : "in"
    Product ||--o{ OrderItem : "in"
    Product ||--o{ WishlistItem : "in"
    Product ||--o{ ProductVariant : has
    Product }o--o{ Tag : tagged
    Product ||--o{ ProductAttribute : has
    Product ||--o{ Inventory : tracks
    Product ||--o{ ProductDiscount : has
    Product ||--o{ ProductQuestion : has
    Product ||--o{ Bid : "receives bids"
    Product ||--o{ Auction : "in auction"
    Product ||--o{ PriceHistory : tracks
    Product }o--o{ ProductCollection : "in collection"
    
    %% ORDER MANAGEMENT
    Order ||--o{ OrderItem : contains
    Order ||--|| Address : "ships to"
    Order ||--|| Address : "bills to"
    Order ||--o{ Payment : has
    Order ||--o{ Shipment : has
    Order ||--o{ OrderStatusHistory : tracks
    Order ||--o{ ReturnRequest : has
    Order ||--o{ Invoice : generates
    Order ||--|| Coupon : uses
    Order ||--o{ OrderNote : has
    Order ||--o{ Commission : generates
    
    %% PAYMENT - IRANIAN BANKS
    Payment ||--o{ IranianBankTransaction : processes
    Payment ||--o{ PaymentRefund : has
    Payment ||--|| Wallet : "from wallet"
    IranianBankGateway ||--o{ IranianBankTransaction : handles
    IranianBankGateway ||--o{ GatewayLog : logs
    
    %% WALLET & LOYALTY
    Wallet ||--o{ WalletTransaction : has
    LoyaltyProgram ||--o{ LoyaltyPoint : manages
    LoyaltyProgram ||--o{ LoyaltyTier : has
    
    %% SHIPPING & LOGISTICS
    Shipment ||--o{ ShipmentTracking : tracks
    ShippingProvider ||--o{ Shipment : handles
    Warehouse ||--o{ Inventory : stores
    Warehouse ||--o{ StockTransfer : "transfers from/to"
    ShippingZone ||--o{ ShippingRate : has
    Country ||--o{ ShippingZone : "in zone"
    
    %% CMS & CONTENT
    Page ||--o{ PageSection : contains
    Menu ||--o{ MenuItem : contains
    BlogPost }o--o{ BlogCategory : categorized
    BlogPost }o--o{ BlogTag : tagged
    BlogPost ||--o{ BlogComment : has
    Slider ||--o{ Slide : contains
    
    %% MARKETING & PROMOTIONS
    Campaign ||--o{ CampaignEmail : sends
    Campaign ||--o{ CampaignAnalytics : tracks
    Banner ||--o{ BannerClick : tracks
    PopupModal ||--o{ PopupView : tracks
    Coupon ||--o{ CouponUsage : tracks
    FlashSale ||--o{ FlashSaleProduct : includes
    
    %% COMMUNICATION
    Ticket ||--o{ TicketMessage : contains
    Ticket ||--|| TicketCategory : categorized
    EmailQueue ||--o{ EmailLog : tracks
    SMSQueue ||--o{ SMSLog : tracks
    PushNotificationQueue ||--o{ PushNotificationLog : tracks
    
    %% SUBSCRIPTION
    SubscriptionPlan ||--o{ Subscription : has
    Subscription ||--o{ SubscriptionPayment : generates
    
    %% AFFILIATE
    AffiliateLink ||--o{ AffiliateClick : tracks
    AffiliateLink ||--o{ AffiliateCommission : earns
    
    %% ANALYTICS & REPORTING
    DashboardWidget ||--o{ WidgetData : displays
    Report ||--o{ ReportSchedule : scheduled
    
    %% TAX & ACCOUNTING
    TaxRate ||--o{ Order : "applied to"
    TaxRate ||--o{ Product : "applied to"
    AccountingTransaction ||--o{ AccountingEntry : contains
    
    User {
        int UserId PK
        string Email UK
        string PhoneNumber UK
        string PasswordHash
        string FirstName
        string LastName
        string NationalId
        datetime DateOfBirth
        string Gender
        datetime CreatedAt
        datetime UpdatedAt
        datetime LastLogin
        bool IsEmailVerified
        bool IsPhoneVerified
        bool IsTwoFactorEnabled
        bool IsActive
        bool IsBlocked
        string BlockReason
        datetime BlockedAt
        int BlockedByUserId FK
        string ProfileImageUrl
        string ReferralCode UK
        int ReferredByUserId FK
        string PreferredLanguage
        string PreferredCurrency
        string TimeZone
        string Notes
    }
    
    Role {
        int RoleId PK
        string Name UK
        string DisplayName
        string Description
        bool IsSystemRole
        bool IsActive
        int Priority
        datetime CreatedAt
    }
    
    Permission {
        int PermissionId PK
        string Name UK
        string DisplayName
        string Description
        string Module
        string Action
        bool IsSystemPermission
    }
    
    ActivityLog {
        int LogId PK
        int UserId FK
        string Action
        string Module
        string EntityType
        int EntityId
        string OldValue
        string NewValue
        string IpAddress
        string UserAgent
        datetime CreatedAt
        string Details
    }
    
    UserSession {
        int SessionId PK
        int UserId FK
        string SessionToken UK
        string IpAddress
        string UserAgent
        string DeviceInfo
        string DeviceType
        string Browser
        string OS
        string Location
        datetime CreatedAt
        datetime ExpiresAt
        datetime LastActivityAt
        bool IsActive
    }
    
    UserActivity {
        int ActivityId PK
        int UserId FK
        string ActivityType
        string PageUrl
        string EntityType
        int EntityId
        string IpAddress
        datetime CreatedAt
        int DurationSeconds
    }
    
    Address {
        int AddressId PK
        int UserId FK
        string RecipientName
        string RecipientPhone
        string AddressLine1
        string AddressLine2
        string City
        string State
        string Province
        string Country
        string PostalCode
        decimal Latitude
        decimal Longitude
        bool IsDefault
        string AddressType
        string LocationType
        string Notes
    }
    
    PaymentMethod {
        int PaymentMethodId PK
        int UserId FK
        string MethodType
        string CardNumber
        string CardHolderName
        string BankName
        string IBAN
        string SHEBA
        datetime ExpiryDate
        bool IsDefault
        bool IsVerified
        datetime VerifiedAt
    }
    
    Vendor {
        int VendorId PK
        int UserId FK
        string BusinessName
        string BusinessNameEn
        string BusinessRegistrationNumber
        string EconomicCode
        string TaxId
        string BankAccountNumber
        string IBAN
        string SHEBA
        decimal CommissionRate
        string Status
        datetime JoinedDate
        datetime VerifiedDate
        int VerifiedByUserId FK
        bool IsActive
        decimal TotalSales
        int TotalOrders
        decimal Rating
        int ReviewCount
        string RejectionReason
    }
    
    VendorProfile {
        int ProfileId PK
        int VendorId FK
        string DescriptionFa
        string DescriptionEn
        string LogoUrl
        string BannerUrl
        string Website
        string PhoneNumber
        string Email
        string Address
        string SupportEmail
        string ReturnPolicy
        string ShippingPolicy
        string WorkingHours
        string SocialMediaLinks
    }
    
    VendorDocument {
        int DocumentId PK
        int VendorId FK
        string DocumentType
        string DocumentUrl
        string DocumentNumber
        string Status
        datetime UploadedAt
        datetime VerifiedAt
        int VerifiedByUserId FK
        string RejectionReason
        datetime ExpiryDate
    }
    
    VendorPayout {
        int PayoutId PK
        int VendorId FK
        decimal Amount
        decimal Fee
        decimal NetAmount
        string PayoutMethod
        string TransactionId
        string BankDetails
        string Status
        datetime RequestedAt
        datetime ProcessedAt
        int ProcessedByUserId FK
        string Notes
        string RejectionReason
    }
    
    VendorSettlement {
        int SettlementId PK
        int VendorId FK
        decimal TotalSales
        decimal TotalCommission
        decimal TotalRefunds
        decimal NetAmount
        datetime PeriodStart
        datetime PeriodEnd
        string Status
        datetime GeneratedAt
        datetime PaidAt
        string InvoiceUrl
    }
    
    VendorReview {
        int ReviewId PK
        int VendorId FK
        int UserId FK
        int Rating
        string Comment
        datetime CreatedAt
        bool IsApproved
        int ApprovedByUserId FK
    }
    
    Commission {
        int CommissionId PK
        int OrderId FK
        int VendorId FK
        decimal OrderAmount
        decimal CommissionRate
        decimal CommissionAmount
        decimal PlatformFee
        string Status
        datetime CreatedAt
        datetime SettledAt
    }
    
    Category {
        int CategoryId PK
        int ParentCategoryId FK
        string NameEn
        string NameFa
        string DescriptionEn
        string DescriptionFa
        string Slug UK
        string IconUrl
        string ImageUrl
        string BannerUrl
        bool IsActive
        bool IsFeatured
        int DisplayOrder
        string MetaTitle
        string MetaDescription
        string MetaKeywords
        datetime CreatedAt
        int CreatedByUserId FK
    }
    
    Product {
        int ProductId PK
        int CategoryId FK
        int VendorId FK
        string NameEn
        string NameFa
        string DescriptionEn
        string DescriptionFa
        string SKU UK
        string Barcode
        decimal Price
        decimal CompareAtPrice
        decimal CostPrice
        decimal WholesalePrice
        int StockQuantity
        int LowStockThreshold
        string Brand
        string Manufacturer
        string ManufacturerCountry
        bool IsActive
        bool IsFeatured
        bool IsDigital
        bool RequiresShipping
        bool TrackInventory
        bool AllowBackorder
        bool ChargesTax
        datetime CreatedAt
        datetime UpdatedAt
        int CreatedByUserId FK
        int UpdatedByUserId FK
        decimal Weight
        string Dimensions
        int ViewCount
        int SalesCount
        decimal Rating
        int ReviewCount
        string VideoUrl
        string Status
        datetime PublishedAt
        int PublishedByUserId FK
        string SeoTitle
        string SeoDescription
        string SeoKeywords
        string Slug UK
        int MinOrderQuantity
        int MaxOrderQuantity
    }
    
    ProductVariant {
        int VariantId PK
        int ProductId FK
        string VariantName
        string SKU UK
        string Barcode
        decimal Price
        decimal CompareAtPrice
        int StockQuantity
        string Color
        string Size
        string Material
        string Style
        string ImageUrl
        bool IsActive
        bool IsDefault
        int DisplayOrder
        decimal Weight
    }
    
    ProductAttribute {
        int AttributeId PK
        int ProductId FK
        string AttributeGroup
        string AttributeName
        string AttributeValue
        string AttributeUnit
        int DisplayOrder
        bool IsFilterable
        bool IsVisibleOnFront
    }
    
    ProductImage {
        int ImageId PK
        int ProductId FK
        string ImageUrl
        string ThumbnailUrl
        string MediumUrl
        string LargeUrl
        string AltTextEn
        string AltTextFa
        int DisplayOrder
        bool IsPrimary
        int SizeBytes
    }
    
    ProductCollection {
        int CollectionId PK
        string NameEn
        string NameFa
        string Description
        string ImageUrl
        bool IsActive
        bool IsFeatured
        int DisplayOrder
        datetime CreatedAt
    }
    
    Tag {
        int TagId PK
        string NameEn UK
        string NameFa
        string Slug UK
        int UsageCount
        bool IsActive
    }
    
    ProductDiscount {
        int DiscountId PK
        int ProductId FK
        string DiscountName
        string DiscountType
        decimal DiscountValue
        datetime StartDate
        datetime EndDate
        int MaxUsagePerUser
        int MaxUsageTotal
        int UsedCount
        bool IsActive
        bool RequiresCoupon
        int Priority
    }
    
    PriceHistory {
        int HistoryId PK
        int ProductId FK
        int VariantId FK
        decimal OldPrice
        decimal NewPrice
        datetime ChangedAt
        int ChangedByUserId FK
        string Reason
    }
    
    Review {
        int ReviewId PK
        int ProductId FK
        int UserId FK
        int OrderId FK
        int Rating
        string Title
        string Comment
        datetime CreatedAt
        datetime UpdatedAt
        bool IsVerifiedPurchase
        bool IsApproved
        int ApprovedByUserId FK
        datetime ApprovedAt
        int HelpfulCount
        int UnhelpfulCount
        string VendorResponse
        datetime VendorResponseDate
        string Status
        string Images
    }
    
    ProductQuestion {
        int QuestionId PK
        int ProductId FK
        int UserId FK
        string Question
        string Answer
        datetime QuestionDate
        datetime AnswerDate
        int AnsweredByUserId FK
        bool IsApproved
        bool IsPublic
        int HelpfulCount
    }
    
    Inventory {
        int InventoryId PK
        int ProductId FK
        int VariantId FK
        int WarehouseId FK
        int AvailableQuantity
        int ReservedQuantity
        int DamagedQuantity
        int MinimumQuantity
        int MaximumQuantity
        int ReorderPoint
        int ReorderQuantity
        datetime LastRestocked
        datetime LastSold
        string Location
        string Bin
        string Notes
    }
    
    Warehouse {
        int WarehouseId PK
        string Name
        string Code UK
        string Address
        string City
        string State
        string Country
        string PostalCode
        string ManagerName
        string PhoneNumber
        string Email
        bool IsActive
        bool IsDefault
        decimal Latitude
        decimal Longitude
        int Priority
    }
    
    StockTransfer {
        int TransferId PK
        int FromWarehouseId FK
        int ToWarehouseId FK
        int ProductId FK
        int VariantId FK
        int Quantity
        string Status
        string Reason
        datetime RequestedAt
        datetime ShippedAt
        datetime ReceivedAt
        int RequestedByUserId FK
        int ApprovedByUserId FK
        string TrackingNumber
        string Notes
    }
    
    Cart {
        int CartId PK
        int UserId FK
        string SessionId
        datetime CreatedAt
        datetime UpdatedAt
        datetime ExpiresAt
        bool IsActive
        string PromoCode
    }
    
    CartItem {
        int CartItemId PK
        int CartId FK
        int ProductId FK
        int VariantId FK
        int Quantity
        decimal Price
        decimal DiscountAmount
        datetime AddedAt
        datetime UpdatedAt
    }
    
    Wishlist {
        int WishlistId PK
        int UserId FK
        string Name
        bool IsPublic
        bool IsDefault
        datetime CreatedAt
        int ItemCount
    }
    
    WishlistItem {
        int WishlistItemId PK
        int WishlistId FK
        int ProductId FK
        int VariantId FK
        datetime AddedAt
        int Priority
        string Notes
    }
    
    Order {
        int OrderId PK
        int UserId FK
        int ShippingAddressId FK
        int BillingAddressId FK
        int CouponId FK
        int VendorId FK
        string OrderNumber UK
        decimal SubTotal
        decimal TaxAmount
        decimal TaxRate
        decimal ShippingCost
        decimal DiscountAmount
        decimal CouponDiscountAmount
        decimal WalletUsed
        decimal LoyaltyPointsUsed
        decimal LoyaltyPointsValue
        decimal TotalAmount
        string OrderStatus
        string PaymentStatus
        string FulfillmentStatus
        string PaymentMethod
        datetime OrderDate
        datetime UpdatedAt
        datetime PaidAt
        datetime ShippedAt
        datetime DeliveredAt
        datetime CancelledAt
        datetime EstimatedDeliveryDate
        string CustomerNote
        string AdminNote
        string InvoiceNumber
        bool IsGift
        string GiftMessage
        string Currency
        decimal ExchangeRate
        string IpAddress
        string UserAgent
        int ProcessedByUserId FK
        string CancellationReason
        int CancelledByUserId FK
        bool IsPaid
        bool IsShipped
        bool IsDelivered
    }
    
    OrderItem {
        int OrderItemId PK
        int OrderId FK
        int ProductId FK
        int VariantId FK
        int VendorId FK
        string ProductName
        string VariantName
        string SKU
        string ImageUrl
        int Quantity
        decimal UnitPrice
        decimal TotalPrice
        decimal TaxAmount
        decimal DiscountAmount
        decimal CommissionAmount
        decimal CommissionRate
        string Status
        bool IsRefunded
        decimal RefundedAmount
    }
    
    OrderStatusHistory {
        int HistoryId PK
        int OrderId FK
        string PreviousStatus
        string NewStatus
        string Comment
        int ChangedByUserId FK
        datetime ChangedAt
        bool NotifyCustomer
    }
    
    OrderNote {
        int NoteId PK
        int OrderId FK
        int UserId FK
        string Note
        bool IsCustomerNote
        bool IsVisible
        datetime CreatedAt
    }
    
    Payment {
        int PaymentId PK
        int OrderId FK
        int WalletId FK
        string PaymentMethod
        string TransactionId UK
        decimal Amount
        string Currency
        string PaymentStatus
        datetime PaymentDate
        datetime UpdatedAt
        string PaymentGateway
        string GatewayResponse
        string FailureReason
        int RetryCount
        string CardNumber
        string CardType
        string PayerName
        string PayerEmail
        string PayerPhone
    }
    
    IranianBankGateway {
        int GatewayId PK
        string GatewayName
        string GatewayCode UK
        string BankName
        string MerchantId
        string TerminalId
        string ApiKey
        string ApiEndpoint
        string CallbackUrl
        bool IsActive
        bool IsTestMode
        decimal TransactionFee
        decimal TransactionFeePercent
        int Priority
        int TimeoutSeconds
        string SupportedCurrencies
        string Logo
        int MinAmount
        int MaxAmount
        bool RequiresVerification
    }
    
    IranianBankTransaction {
        int TransactionId PK
        int PaymentId FK
        int GatewayId FK
        string ReferenceNumber UK
        string TraceNumber
        string Authority
        string CardNumber
        string CardHashPan
        decimal Amount
        string Currency
        string Status
        datetime InitiatedAt
        datetime CompletedAt
        datetime VerifiedAt
        string GatewayResponseCode
        string GatewayMessage
        string IpAddress
        bool IsVerified
        string VerificationToken
        string CallbackData
        int RetryCount
    }
    
    GatewayLog {
        int LogId PK
        int GatewayId FK
        int TransactionId FK
        string RequestType
        string RequestData
        string ResponseData
        int ResponseCode
        string ResponseMessage
        datetime CreatedAt
        int DurationMs
    }
    
    PaymentRefund {
        int RefundId PK
        int PaymentId FK
        int OrderId FK
        decimal RefundAmount
        string RefundReason
        string Status
        datetime RequestedAt
        datetime ProcessedAt
        int ProcessedByUserId FK
        string RefundTransactionId
        string RefundMethod
        string Notes
    }
    
    Wallet {
        int WalletId PK
        int UserId FK
        decimal Balance
        decimal PendingBalance
        string Currency
        bool IsActive
        bool IsLocked
        string LockReason
        datetime CreatedAt
        datetime UpdatedAt
    }
    
    WalletTransaction {
        int TransactionId PK
        int WalletId FK
        string TransactionType
        decimal Amount
        decimal BalanceBefore
        decimal BalanceAfter
        string Description
        string ReferenceType
        int ReferenceId
        datetime CreatedAt
        string Status
        int ProcessedByUserId FK
        string Notes
    }
    
    LoyaltyProgram {
        int ProgramId PK
        string Name
        string Description
        decimal PointsPerCurrency
        decimal CurrencyPerPoint
        int MinimumPointsForRedemption
        int ExpirationDays
        bool IsActive
        datetime StartDate
        datetime EndDate
        bool AllowPartialRedemption
    }
    
    LoyaltyTier {
        int TierId PK
        int ProgramId FK
        string Name
        int MinimumPoints
        decimal BonusMultiplier
        string Benefits
        string BadgeUrl
    }
    
    LoyaltyPoint {
        int PointId PK
        int UserId FK
        int ProgramId FK
        int Points
        string TransactionType
        string Description
        int ReferenceId
        string ReferenceType
        datetime EarnedAt
        datetime ExpiresAt
        datetime RedeemedAt
        bool IsExpired
        bool IsRedeemed
    }
    
    Shipment {
        int ShipmentId PK
        int OrderId FK
        int ShippingProviderId FK
        int WarehouseId FK
        string ShipmentNumber UK
        string TrackingNumber
        string ShipmentStatus
        datetime ShippedDate
        datetime EstimatedDelivery
        datetime ActualDelivery
        decimal ShippingCost
        decimal Weight
        string Dimensions
        string PackageType
        int PackageCount
        bool RequiresSignature
        bool IsInsured
        decimal InsuranceAmount
        string DriverName
        string DriverPhone
        string Notes
    }
    
    ShipmentTracking {
        int TrackingId PK
        int ShipmentId FK
        string Status
        string Location
        string Description
        datetime Timestamp
        string UpdatedBy
        decimal Latitude
        decimal Longitude
    }
    
    ShippingProvider {
        int ProviderId PK
        string ProviderName
        string ProviderCode UK
        string ContactName
        string PhoneNumber
        string Email
        string Website
        string ApiEndpoint
        string ApiKey
        string Logo
        bool IsActive
        bool IsInternational
        string SupportedCountries
        decimal BaseRate
        string TrackingUrlPattern
        int EstimatedDays
        int Priority
        bool RequiresPickup
        string PickupAddress
    }
    
    ShippingZone {
        int ZoneId PK
        string ZoneName
        string Description
        bool IsActive
        int Priority
    }
    
    Country {
        int CountryId PK
        int ZoneId FK
        string CountryName
        string CountryCode
        string Currency
        bool IsActive
    }
    
    ShippingRate {
        int RateId PK
        int ZoneId FK
        int ProviderId FK
        string RateName
        decimal MinWeight
        decimal MaxWeight
        decimal MinOrderAmount
        decimal MaxOrderAmount
        decimal Rate
        string RateType
        bool IsActive
        int EstimatedDays
    }
    
    ReturnRequest {
        int ReturnId PK
        int OrderId FK
        int UserId FK
        string ReturnNumber UK
        string ReturnType
        string Reason
        string Description
        string Status
        datetime RequestedAt
        datetime ApprovedAt
        int ApprovedByUserId FK
        datetime ReceivedAt
        datetime CompletedAt
        decimal RefundAmount
        string ReturnMethod
        string TrackingNumber
        string Images
        string AdminNotes
        string RejectionReason
    }
    
    Invoice {
        int InvoiceId PK
        int OrderId FK
        string InvoiceNumber UK
        string InvoiceType
        datetime InvoiceDate
        datetime DueDate
        decimal SubTotal
        decimal TaxAmount
        decimal DiscountAmount
        decimal ShippingCost
        decimal TotalAmount
        string Status
        string InvoiceUrl
        string Notes
        datetime PaidAt
        int GeneratedByUserId FK
        string BillingAddress
        string TaxId
    }
    
    Coupon {
        int CouponId PK
        string Code UK
        string NameEn
        string NameFa
        string DescriptionEn
        string DescriptionFa
        string DiscountType
        decimal DiscountValue
        decimal MinimumOrderAmount
        decimal MaximumDiscountAmount
        datetime ValidFrom
        datetime ValidUntil
        int MaxUsageCount
        int MaxUsagePerUser
        int UsedCount
        bool IsActive
        bool IsFirstOrderOnly
        bool IsSingleUse
        string ApplicableCategories
        string ApplicableProducts
        string ApplicableUserRoles
        string ApplicableVendors
        int CreatedByUserId FK
        datetime CreatedAt
    }
    
    CouponUsage {
        int UsageId PK
        int CouponId FK
        int UserId FK
        int OrderId FK
        decimal DiscountAmount
        datetime UsedAt
    }
    
    FlashSale {
        int SaleId PK
        string Name
        string Description
        datetime StartDate
        datetime EndDate
        bool IsActive
        bool IsFeatured
        string BannerUrl
        int CreatedByUserId FK
    }
    
    FlashSaleProduct {
        int SaleProductId PK
        int SaleId FK
        int ProductId FK
        decimal OriginalPrice
        decimal SalePrice
        decimal DiscountPercent
        int StockLimit
        int SoldCount
        bool IsActive
    }
    
    Notification {
        int NotificationId PK
        int UserId FK
        string NotificationType
        string Title
        string Message
        string ActionUrl
        string Icon
        bool IsRead
        datetime CreatedAt
        datetime ReadAt
        string Channel
        string Priority
        string Data
    }
    
    Message {
        int MessageId PK
        int SenderUserId FK
        int ReceiverUserId FK
        string Subject
        string Body
        bool IsRead
        bool IsStarred
        bool IsDeleted
        datetime SentAt
        datetime ReadAt
        int ParentMessageId FK
        string Attachments
    }
    
    Ticket {
        int TicketId PK
        int UserId FK
        int CategoryId FK
        string TicketNumber UK
        string Subject
        string Priority
        string Status
        datetime CreatedAt
        datetime UpdatedAt
        datetime ClosedAt
        int AssignedToUserId FK
        int ClosedByUserId FK
        int OrderId FK
        string Department
        decimal SatisfactionRating
    }
    
    TicketCategory {
        int CategoryId PK
        string CategoryName
        string Description
        bool IsActive
        int DisplayOrder
    }
    
    TicketMessage {
        int MessageId PK
        int TicketId FK
        int UserId FK
        string Message
        string AttachmentUrl
        datetime CreatedAt
        bool IsStaffReply
        bool IsInternal
    }
    
    Auction {
        int AuctionId PK
        int ProductId FK
        decimal StartingPrice
        decimal ReservePrice
        decimal CurrentBid
        decimal BuyNowPrice
        int BidCount
        datetime StartTime
        datetime EndTime
        string Status
        int WinnerUserId FK
        bool AutoExtend
        int ExtensionMinutes
    }
    
    Bid {
        int BidId PK
        int AuctionId FK
        int UserId FK
        decimal BidAmount
        datetime BidTime
        bool IsAutoBid
        decimal MaxAutoBidAmount
        bool IsWinning
        bool IsRetracted
        string IpAddress
    }
    
    SubscriptionPlan {
        int PlanId PK
        string Name
        string Description
        decimal Price
        string BillingCycle
        int TrialDays
        bool IsActive
        bool IsFeatured
        string Features
        int DisplayOrder
        int MaxProducts
        int MaxOrders
        bool HasCustomDomain
        bool HasPrioritySupport
    }
    
    Subscription {
        int SubscriptionId PK
        int UserId FK
        int PlanId FK
        string Status
        datetime StartDate
        datetime EndDate
        datetime TrialEndDate
        datetime NextBillingDate
        bool AutoRenew
        datetime CancelledAt
        int CancelledByUserId FK
        string CancellationReason
    }
    
    SubscriptionPayment {
        int PaymentId PK
        int SubscriptionId FK
        decimal Amount
        string Status
        datetime PaymentDate
        string TransactionId
        string PaymentMethod
    }
    
    AffiliateLink {
        int LinkId PK
        int UserId FK
        string AffiliateCode UK
        string SourceUrl
        string TargetUrl
        int ClickCount
        int ConversionCount
        decimal TotalEarnings
        decimal CommissionRate
        bool IsActive
        datetime CreatedAt
        datetime ExpiresAt
    }
    
    AffiliateClick {
        int ClickId PK
        int AffiliateLinkId FK
        string IpAddress
        string UserAgent
        string ReferrerUrl
        string Country
        string City
        datetime ClickedAt
        bool IsConverted
        int OrderId FK
    }
    
    AffiliateCommission {
        int CommissionId PK
        int AffiliateLinkId FK
        int OrderId FK
        int UserId FK
        decimal OrderAmount
        decimal CommissionRate
        decimal CommissionAmount
        string Status
        datetime EarnedAt
        datetime PaidAt
        string PaymentMethod
        string Notes
    }
    
    Page {
        int PageId PK
        string TitleEn
        string TitleFa
        string Slug UK
        string ContentEn
        string ContentFa
        string Template
        bool IsActive
        bool IsHomePage
        datetime CreatedAt
        datetime UpdatedAt
        int CreatedByUserId FK
        int UpdatedByUserId FK
        string MetaTitle
        string MetaDescription
        string MetaKeywords
        int ViewCount
    }
    
    PageSection {
        int SectionId PK
        int PageId FK
        string SectionType
        string SectionName
        string Content
        int DisplayOrder
        bool IsActive
        string Settings
    }
    
    Menu {
        int MenuId PK
        string Name
        string Location
        bool IsActive
        int DisplayOrder
    }
    
    MenuItem {
        int ItemId PK
        int MenuId FK
        int ParentItemId FK
        string LabelEn
        string LabelFa
        string Url
        string Target
        string Icon
        bool IsActive
        int DisplayOrder
        string CssClass
    }
    
    BlogPost {
        int PostId PK
        int AuthorUserId FK
        string TitleEn
        string TitleFa
        string Slug UK
        string ContentEn
        string ContentFa
        string Excerpt
        string FeaturedImage
        string Status
        bool IsFeatured
        bool AllowComments
        datetime PublishedAt
        datetime CreatedAt
        datetime UpdatedAt
        int ViewCount
        int CommentCount
        string MetaTitle
        string MetaDescription
        string MetaKeywords
    }
    
    BlogCategory {
        int CategoryId PK
        string NameEn
        string NameFa
        string Slug UK
        string Description
        bool IsActive
        int DisplayOrder
    }
    
    BlogTag {
        int TagId PK
        string NameEn
        string NameFa
        string Slug UK
    }
    
    BlogComment {
        int CommentId PK
        int PostId FK
        int UserId FK
        int ParentCommentId FK
        string Comment
        string Status
        datetime CreatedAt
        bool IsApproved
        int ApprovedByUserId FK
    }
    
    Slider {
        int SliderId PK
        string Name
        string Location
        bool IsActive
        int DisplayOrder
    }
    
    Slide {
        int SlideId PK
        int SliderId FK
        string TitleEn
        string TitleFa
        string SubtitleEn
        string SubtitleFa
        string ImageUrl
        string LinkUrl
        string ButtonText
        bool IsActive
        int DisplayOrder
        datetime StartDate
        datetime EndDate
    }
    
    Campaign {
        int CampaignId PK
        string Name
        string Description
        string CampaignType
        string Status
        datetime StartDate
        datetime EndDate
        string TargetAudience
        int CreatedByUserId FK
        datetime CreatedAt
        int TotalSent
        int TotalOpened
        int TotalClicked
    }
    
    CampaignEmail {
        int EmailId PK
        int CampaignId FK
        int UserId FK
        string EmailAddress
        string Status
        datetime SentAt
        datetime OpenedAt
        datetime ClickedAt
        string ClickedUrl
    }
    
    CampaignAnalytics {
        int AnalyticsId PK
        int CampaignId FK
        string MetricName
        decimal MetricValue
        datetime RecordedAt
    }
    
    Banner {
        int BannerId PK
        string Name
        string Location
        string ImageUrl
        string LinkUrl
        string TargetAudience
        datetime StartDate
        datetime EndDate
        bool IsActive
        int DisplayOrder
        int ViewCount
        int ClickCount
        int CreatedByUserId FK
    }
    
    BannerClick {
        int ClickId PK
        int BannerId FK
        int UserId FK
        string IpAddress
        datetime ClickedAt
    }
    
    PopupModal {
        int ModalId PK
        string Name
        string TitleEn
        string TitleFa
        string ContentEn
        string ContentFa
        string ImageUrl
        string ButtonText
        string ButtonUrl
        string DisplayCondition
        int DisplayDelay
        bool ShowOnce
        datetime StartDate
        datetime EndDate
        bool IsActive
        int ViewCount
        int ClickCount
    }
    
    PopupView {
        int ViewId PK
        int ModalId FK
        int UserId FK
        string SessionId
        datetime ViewedAt
        bool Clicked
    }
    
    EmailQueue {
        int QueueId PK
        int UserId FK
        string ToEmail
        string Subject
        string Body
        string EmailType
        int Priority
        string Status
        int RetryCount
        datetime CreatedAt
        datetime SentAt
        string ErrorMessage
    }
    
    EmailLog {
        int LogId PK
        int QueueId FK
        string Status
        string Response
        datetime ProcessedAt
    }
    
    EmailTemplate {
        int TemplateId PK
        string Name UK
        string SubjectEn
        string SubjectFa
        string BodyEn
        string BodyFa
        string TemplateType
        string Variables
        bool IsActive
        datetime CreatedAt
        datetime UpdatedAt
        int UpdatedByUserId FK
    }
    
    SMSQueue {
        int QueueId PK
        int UserId FK
        string PhoneNumber
        string Message
        string SmsType
        int Priority
        string Status
        int RetryCount
        datetime CreatedAt
        datetime SentAt
        string ErrorMessage
        string Provider
    }
    
    SMSLog {
        int LogId PK
        int QueueId FK
        string Status
        string Response
        string MessageId
        decimal Cost
        datetime ProcessedAt
    }
    
    PushNotificationQueue {
        int QueueId PK
        int UserId FK
        string DeviceToken
        string Title
        string Body
        string Data
        string Status
        datetime CreatedAt
        datetime SentAt
    }
    
    PushNotificationLog {
        int LogId PK
        int QueueId FK
        string Status
        string Response
        datetime ProcessedAt
    }
    
    SystemSetting {
        int SettingId PK
        string SettingKey UK
        string SettingValue
        string SettingType
        string Category
        string Description
        bool IsPublic
        datetime UpdatedAt
        int UpdatedByUserId FK
    }
    
    Announcement {
        int AnnouncementId PK
        string TitleEn
        string TitleFa
        string ContentEn
        string ContentFa
        string AnnouncementType
        string Priority
        datetime StartDate
        datetime EndDate
        bool IsActive
        string TargetAudience
        int CreatedByUserId FK
        datetime CreatedAt
    }
    
    DashboardWidget {
        int WidgetId PK
        string WidgetName
        string WidgetType
        string DataSource
        string Configuration
        int DisplayOrder
        bool IsActive
        string Permissions
    }
    
    WidgetData {
        int DataId PK
        int WidgetId FK
        string DataKey
        string DataValue
        datetime UpdatedAt
    }
    
    Report {
        int ReportId PK
        string ReportName
        string ReportType
        string Description
        string Query
        string Parameters
        string OutputFormat
        bool IsScheduled
        int CreatedByUserId FK
        datetime CreatedAt
    }
    
    ReportSchedule {
        int ScheduleId PK
        int ReportId FK
        string Frequency
        string Recipients
        datetime NextRunTime
        datetime LastRunTime
        bool IsActive
    }
    
    TaxRate {
        int TaxRateId PK
        string TaxName
        decimal Rate
        string Country
        string State
        string City
        string ZipCode
        bool IsActive
        datetime EffectiveFrom
        datetime EffectiveTo
        int Priority
    }
    
    AccountingTransaction {
        int TransactionId PK
        string TransactionType
        string TransactionNumber UK
        decimal Amount
        string Currency
        string Description
        datetime TransactionDate
        string Status
        int CreatedByUserId FK
    }
    
    AccountingEntry {
        int EntryId PK
        int TransactionId FK
        string AccountCode
        string AccountName
        decimal DebitAmount
        decimal CreditAmount
        string Description
    }